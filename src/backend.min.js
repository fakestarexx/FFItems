const require=function(){let e={grid:null,fadeBg:null,pagePill:null,filterDropdown:null,dropdownMenu:null,pageSheet:null,searchTextarea:null,pagesGrid:null,searchResults:null,modeTab:null,activeClone:null,originalBox:null,detailsCard:null,modalContainer:null,currentPage:1,itemsPerPage:100,allItems:[],allIcons:[],filteredItems:[],filteredIcons:[],totalPages:1,currentSearchQuery:"",currentMode:"items",currentType:"",currentRarity:"",allTypes:[],allRarities:[],imageCache:new Map,failedImages:new Set,isModalAnimating:!1,isDropdownOpen:!1,rarityMap:{WHITE:"Common",BLUE:"Rare",GREEN:"Uncommon",ORANGE:"Mythic",ORANGE_PLUS:"Mythic+",PURPLE:"Epic",PURPLE_PLUS:"Epic+",RED:"Artifact",NONE:"None"}};function t(){let t=new URLSearchParams;t.set("mode",e.currentMode),t.set("page",e.currentPage),e.currentType&&t.set("type",e.currentType),e.currentRarity&&t.set("rare",e.currentRarity),e.currentSearchQuery&&t.set("q",e.currentSearchQuery);let a=t.toString()?window.location.pathname+"?"+t.toString():window.location.pathname;window.history.replaceState({},"",a)}function a(a){let n=a.target;if(n.classList.contains("footer-pill")){var r;r=n,r===e.pagePill&&function t(){var a;e.pagesGrid.innerHTML="";for(let n=1;n<=e.totalPages;n++){let r=document.createElement("button");r.className="sheet-page-btn"+(n===e.currentPage?" active":""),r.textContent=n,e.pagesGrid.appendChild(r)}a=e.pageSheet,f(),g(),a.classList.add("active"),e.fadeBg.classList.add("active"),document.body.style.touchAction="none"}()}else if(n.classList.contains("sheet-page-btn"))!function a(n){let r=parseInt(n.textContent);!isNaN(r)&&r>=1&&r<=e.totalPages&&(e.currentPage=r,t(),window.location.search="?page="+r+"&mode="+e.currentMode+(e.currentSearchQuery?"&q="+encodeURIComponent(e.currentSearchQuery):"")+(e.currentType?"&type="+e.currentType:"")+(e.currentRarity?"&rare="+e.currentRarity:""))}(n);else if(n.classList.contains("dropdown-filter-btn"))!function a(n){let r=n.getAttribute("data-filter-type"),l=n.getAttribute("data-filter-value");"type"===r?"all"===l?e.currentType="":e.currentType=l:"rarity"===r&&("all"===l?e.currentRarity="":e.currentRarity=l),e.currentPage=1,g(),c(),t()}(n);else if(n.classList.contains("item-data")||n.closest(".item-data")||"ITEM-BOX"===n.tagName){let l=n.classList.contains("item-data")?n:n.closest(".item-data")||("ITEM-BOX"===n.tagName?n:n.closest("item-box"));!function t(a){if("items"===e.currentMode){let n=Array.from(e.grid.querySelectorAll("item-box.item-data")).indexOf(a),r=(e.currentPage-1)*e.itemsPerPage,l=r+n;if(l>=0&&l<e.filteredItems.length){let i=e.filteredItems[l];y(a,i)}}else{let s=Array.from(e.grid.querySelectorAll("item-box.item-data")).indexOf(a),o=(e.currentPage-1)*e.itemsPerPage,d=o+s;if(d>=0&&d<e.filteredIcons.length){let c=e.filteredIcons[d],p={1:c,3:u(c)};y(a,p)}}}(l)}}function n(t){e.activeClone&&t.preventDefault()}function r(a){e.currentPage=1,e.currentSearchQuery=a.target.value.trim(),c(),p(),t()}function l(e){"Enter"===e.key&&(e.preventDefault(),f())}function i(t){t.target!==e.fadeBg||e.isModalAnimating||(function t(){if(!e.activeClone||!e.originalBox||e.isModalAnimating)return;e.isModalAnimating=!0,document.body.style.overflow="",e.detailsCard&&(e.detailsCard.style.transform="translateX(-50%) translateY(20px)",e.detailsCard.style.opacity="0"),e.fadeBg.classList.remove("active"),e.modalContainer.classList.remove("active");let a=e.originalBox.getBoundingClientRect();e.activeClone.style.left=a.left+"px",e.activeClone.style.top=a.top+"px",e.activeClone.style.width=a.width+"px",e.activeClone.style.height=a.height+"px",e.activeClone.style.transform="translate(0,0) scale(1)",setTimeout(()=>{e.modalContainer&&e.modalContainer.parentNode&&e.modalContainer.remove(),e.activeClone=null,e.modalContainer=null,e.detailsCard=null,e.isModalAnimating=!1},400)}(),f(),g())}function s(){e.currentMode="items"===e.currentMode?"icons":"items",e.currentPage=1,e.modeTab.textContent="items"===e.currentMode?"Items":"Icons",e.modeTab.classList.add("active"),e.searchTextarea.placeholder=(e.currentMode,"Search"),c(),t(),p()}function o(t){t.stopPropagation(),"items"===e.currentMode&&(e.isDropdownOpen?g():function t(){if("items"!==e.currentMode)return;m();let a=e.filterDropdown.getBoundingClientRect(),n=window.innerWidth,r=a.right-220;r<10&&(r=10),r+220>n-10&&(r=n-220-10),e.dropdownMenu.style.left=r+"px",e.dropdownMenu.style.top=a.bottom+10+"px",e.dropdownMenu.style.right="auto",e.dropdownMenu.classList.add("active"),e.filterDropdown.classList.add("active"),e.fadeBg.classList.add("active"),e.isDropdownOpen=!0,document.body.classList.add("dropdown-open")}())}function d(t,a,n,r){let l=document.createElement("img");l.className=a,l.alt=n||"Free Fire Item";let i="/items/api/icons/not-found.png",s=[];t&&s.push("https://cdn.jsdelivr.net/gh/0xme/ff-resources@main/pngs/300x300/"+t+".png"),r&&s.push("https://cdn.jsdelivr.net/gh/I-SHOW-AKIRU200/AKIRU-ICONS@main/ICONS/"+r+".png"),r&&s.push("https://iconapi.wasmer.app/"+r);let o=0;return s.length?function t(){if(o>=s.length){l.src=i,l.classList.add("loaded");return}let a=s[o++];if(e.imageCache.has(a)){l.src=a,l.classList.add("loaded");return}if(e.failedImages.has(a)){t();return}let n=new Image;n.onload=function(){614===this.naturalWidth&&614===this.naturalHeight?(e.failedImages.add(a),t()):(l.src=a,l.classList.add("loaded"),e.imageCache.set(a,a))},n.onerror=function(){e.failedImages.add(a),t()},n.src=a}():(l.src=i,l.classList.add("loaded")),l}function c(){if(e.grid.innerHTML="","items"===e.currentMode){if(e.filteredItems=e.allItems.filter(t=>{let a=!e.currentSearchQuery||t["3"]&&t["3"].toLowerCase().includes(e.currentSearchQuery.toLowerCase())||t["2"]&&t["2"].toString().includes(e.currentSearchQuery)||t["1"]&&t["1"].toLowerCase().includes(e.currentSearchQuery.toLowerCase())||t["4"]&&t["4"].toLowerCase().includes(e.currentSearchQuery.toLowerCase()),n=!e.currentType||t["6"]===e.currentType,r=!e.currentRarity||t["5"]===e.currentRarity;return a&&n&&r}),e.totalPages=Math.ceil(e.filteredItems.length/e.itemsPerPage),e.currentPage>e.totalPages&&(e.currentPage=Math.max(1,e.totalPages)),0===e.filteredItems.length){e.grid.innerHTML='<div class="no-results">No items found matching your filters</div>',p();return}let t=(e.currentPage-1)*e.itemsPerPage,a=Math.min(t+e.itemsPerPage,e.filteredItems.length),n=e.filteredItems.slice(t,a);n.forEach(t=>{let a=document.createElement("item-box");a.className="item-data",a.setAttribute("data-name",t["3"]||""),a.setAttribute("data-desc",t["4"]||""),a.setAttribute("data-item-id",t["2"]||""),a.setAttribute("data-icon-name",t["1"]||""),a.setAttribute("data-type",t["6"]||""),a.setAttribute("data-rare",t["5"]||"");let n=d(t["1"],"icon",t["3"]||"",t["2"]);a.appendChild(n),e.grid.appendChild(a)})}else{if(e.currentSearchQuery?e.filteredIcons=e.allIcons.filter(t=>t&&t.toLowerCase().includes(e.currentSearchQuery.toLowerCase())):e.filteredIcons=[...e.allIcons],e.totalPages=Math.ceil(e.filteredIcons.length/e.itemsPerPage),e.currentPage>e.totalPages&&(e.currentPage=Math.max(1,e.totalPages)),0===e.filteredIcons.length){e.grid.innerHTML='<div class="no-results">No icons found matching your search</div>',p();return}let r=(e.currentPage-1)*e.itemsPerPage,l=Math.min(r+e.itemsPerPage,e.filteredIcons.length),i=e.filteredIcons.slice(r,l);i.forEach(t=>{let a=document.createElement("item-box");a.className="item-data",a.setAttribute("data-icon-name",t||""),a.setAttribute("data-name",u(t)||"");let n=d(t,"icon",t,null);a.appendChild(n),e.grid.appendChild(a)})}p()}function u(e){if(!e)return"Unknown Icon";if(e.includes("https://")){let t=new URL(e),a=t.pathname.split("/"),n=a[a.length-1];return n.replace(".png","")}return e}function p(){if(e.pagePill.textContent="Page "+e.currentPage+"/"+e.totalPages,"items"===e.currentMode){e.filterDropdown.style.display="flex";let t="Filters";if(e.currentType||e.currentRarity){let a=[];if(e.currentType&&a.push(e.currentType),e.currentRarity){let n=e.currentRarity;e.rarityMap[e.currentRarity]&&(n=e.rarityMap[e.currentRarity]),a.push(n)}(t=a.join(", ")).length>20&&(t=t.substring(0,20)+"...")}e.filterDropdown.innerHTML=t,m()}else e.filterDropdown.style.display="none"}function m(){if(!e.dropdownMenu)return;e.dropdownMenu.innerHTML="";let t=document.createElement("div");t.className="dropdown-section";let a=document.createElement("div");a.className="dropdown-section-title",a.textContent="Type",t.appendChild(a);let n=document.createElement("button");n.className="dropdown-filter-btn"+(e.currentType?"":" active"),n.textContent="All Types",n.setAttribute("data-filter-type","type"),n.setAttribute("data-filter-value","all"),t.appendChild(n),e.allTypes.forEach(a=>{let n=document.createElement("button");n.className="dropdown-filter-btn"+(e.currentType===a?" active":""),n.textContent=a,n.setAttribute("data-filter-type","type"),n.setAttribute("data-filter-value",a),t.appendChild(n)}),e.dropdownMenu.appendChild(t);let r=document.createElement("div");r.className="dropdown-section";let l=document.createElement("div");l.className="dropdown-section-title",l.textContent="Rarity",r.appendChild(l);let i=document.createElement("button");i.className="dropdown-filter-btn"+(e.currentRarity?"":" active"),i.textContent="All Rarities",i.setAttribute("data-filter-type","rarity"),i.setAttribute("data-filter-value","all"),r.appendChild(i),e.allRarities.forEach(t=>{let a=document.createElement("button");a.className="dropdown-filter-btn"+(e.currentRarity===t?" active":"");let n=t;e.rarityMap[t]&&(n=e.rarityMap[t]),a.textContent=n,a.setAttribute("data-filter-type","rarity"),a.setAttribute("data-filter-value",t),r.appendChild(a)}),e.dropdownMenu.appendChild(r)}function g(){e.dropdownMenu.classList.remove("active"),e.filterDropdown.classList.remove("active"),e.fadeBg.classList.remove("active"),e.isDropdownOpen=!1,document.body.classList.remove("dropdown-open")}function f(){document.body.style.touchAction="",e.pageSheet.classList.remove("active"),e.fadeBg.classList.remove("active")}function y(t,a){if(e.activeClone||e.isModalAnimating)return;e.isModalAnimating=!0,document.body.style.overflow="hidden";let n=t.getBoundingClientRect();e.modalContainer=document.createElement("div"),e.modalContainer.className="modal-container",e.modalContainer.style.pointerEvents="none",document.body.appendChild(e.modalContainer);let r=document.createElement("div");r.classList.add("modal"),r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.width=n.width+"px",r.style.height=n.height+"px",r.style.pointerEvents="none";let l=d(a["1"],"modal-icon",a["3"]||a["1"],a["2"]);l.style.pointerEvents="none",r.appendChild(l),e.modalContainer.appendChild(r),e.activeClone=r,e.originalBox=t,setTimeout(()=>{e.fadeBg.classList.add("active"),e.modalContainer.classList.add("active"),r.style.left="50%",r.style.top="calc(50% - 100px)",r.style.transform="translate(-50%,-50%) scale(1.8)",r.style.width="200px",r.style.height="200px",setTimeout(()=>{e.detailsCard=function t(a){let n=document.createElement("div");if(n.className="details-card","icons"===e.currentMode){let r=document.createElement("div");r.className="details-title ibm-plex-mono-bold",r.textContent=u(a["1"]),n.appendChild(r)}else{if(a["3"]){let l=document.createElement("div");l.className="details-title ibm-plex-mono-bold";let i=a["3"];a["4"]&&(i+=" - "+a["4"]),l.textContent=i,n.appendChild(l)}let s=document.createElement("div");if(s.className="details-properties",a["2"]){let o=document.createElement("div");o.className="details-property";let d=document.createElement("span");d.className="details-property-label ibm-plex-mono-bold",d.textContent="Item ID: ";let c=document.createElement("span");c.className="details-property-value ibm-plex-mono-regular",c.textContent=a["2"],o.appendChild(d),o.appendChild(c),s.appendChild(o)}if(a["1"]){let p=document.createElement("div");p.className="details-property";let m=document.createElement("span");m.className="details-property-label ibm-plex-mono-bold",m.textContent="Icon: ";let g=document.createElement("span");g.className="details-property-value ibm-plex-mono-regular",g.textContent=a["1"],p.appendChild(m),p.appendChild(g),s.appendChild(p)}n.appendChild(s)}return n}(a),e.modalContainer.appendChild(e.detailsCard);let t=r.getBoundingClientRect();e.detailsCard.style.left="50%",e.detailsCard.style.top=t.bottom+20+"px",e.detailsCard.style.width=t.width+"px",e.detailsCard.style.transform="translateX(-50%)",setTimeout(()=>{e.detailsCard.classList.add("active"),e.isModalAnimating=!1},50)},400)},50)}return{init:function d(){e.grid=document.getElementById("grid"),e.fadeBg=document.getElementById("fadeBg"),e.pagePill=document.getElementById("pagePill"),e.filterDropdown=document.getElementById("filterDropdown"),e.pageSheet=document.getElementById("pageSheet"),e.searchTextarea=document.getElementById("searchTextarea"),e.pagesGrid=document.getElementById("pagesGrid"),e.searchResults=document.getElementById("searchResults"),e.modeTab=document.getElementById("modeTab"),document.addEventListener("click",a),document.addEventListener("touchmove",n,{passive:!1}),e.searchTextarea.addEventListener("input",r),e.searchTextarea.addEventListener("keydown",l),e.fadeBg.addEventListener("click",i),e.modeTab.addEventListener("click",s),e.filterDropdown.addEventListener("click",o),document.addEventListener("click",function(t){!e.isDropdownOpen||e.filterDropdown.contains(t.target)||e.dropdownMenu.contains(t.target)||g()}),function a(){let n=new URLSearchParams(window.location.search),r=n.get("mode");r&&("items"===r||"icons"===r)&&(e.currentMode=r,e.modeTab.textContent="items"===r?"Items":"Icons",e.modeTab.classList.toggle("active",!0));let l=n.get("type");l&&(e.currentType=l);let i=n.get("rare");i&&(e.currentRarity=i);let s=n.get("q");s&&(e.currentSearchQuery=s,e.searchTextarea.value=s);let o=n.get("page");if(o){let d=parseInt(o);!isNaN(d)&&d>0&&(e.currentPage=d)}let m=n.get("open");m&&setTimeout(()=>{(function a(n){let r=/^\d+$/.test(n);if(r){let l=parseInt(n),i=e.allItems.find(e=>e["2"]===l);if(i){e.currentMode="items",e.modeTab.textContent="Items",e.modeTab.classList.add("active");let s=e.filteredItems.indexOf(i);if(-1!==s){let o=Math.floor(s/e.itemsPerPage)+1;e.currentPage=o,c(),p(),t(),setTimeout(()=>{let t=s%e.itemsPerPage,a=e.grid.querySelectorAll("item-box.item-data");a[t]&&y(a[t],i)},100)}}}else if(n.includes("_")){let d=n,m=e.allIcons.findIndex(e=>e===d||u(e)===d);if(-1!==m){e.currentMode="icons",e.modeTab.textContent="Icons",e.modeTab.classList.add("active");let g=Math.floor(m/e.itemsPerPage)+1;e.currentPage=g,c(),p(),t(),setTimeout(()=>{let t=m%e.itemsPerPage,a=e.grid.querySelectorAll("item-box.item-data");if(a[t]){let n={1:e.allIcons[m],3:u(e.allIcons[m])};y(a[t],n)}},100)}}})(m)},500)}(),Promise.all([fetch("/api/data/items").then(e=>e.ok?e.json():Promise.reject()),fetch("/api/data/assets").then(e=>e.ok?e.json():Promise.reject())]).then(([t,a])=>{e.allItems=t,e.allIcons=Array.isArray(a)?a:Object.values(a).filter(e=>"string"==typeof e),e.allTypes=[...new Set(e.allItems.map(e=>e["6"]).filter(Boolean))].sort(),e.allRarities=[...new Set(e.allItems.map(e=>e["5"]).filter(Boolean))].filter(e=>"255"!==e&&"NONE"!==e).sort(),e.filteredItems=[...e.allItems],e.filteredIcons=[...e.allIcons],"items"===e.currentMode?e.totalPages=Math.ceil(e.filteredItems.length/e.itemsPerPage):e.totalPages=Math.ceil(e.filteredIcons.length/e.itemsPerPage),e.currentPage>e.totalPages&&(e.currentPage=Math.max(1,e.totalPages)),c(),p()}).catch(t=>{e.grid.innerHTML='<div class="no-results">Failed to load data. Please check if API is available.</div>'}),e.dropdownMenu=document.createElement("div"),e.dropdownMenu.className="dropdown-menu",e.dropdownMenu.id="dropdownMenu",document.body.appendChild(e.dropdownMenu)}}}();document.addEventListener("DOMContentLoaded",function(){require.init()});